<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cheesecake: xStreamBatchingBufferCreateStatic</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cheesecake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__x_stream_batching_buffer_create_static.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">xStreamBatchingBufferCreateStatic </div></div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="stream__buffer_8h.html">stream_buffer.h</a></p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="stream__buffer_8h.html#a8b80974e2278f073412293e6580ce56f">StreamBufferHandle_t</a> <a class="code hl_define" href="stream__buffer_8h.html#a25174eaf07f71c7932490c235e77c531">xStreamBatchingBufferCreateStatic</a>( <span class="keywordtype">size_t</span> xBufferSizeBytes,</div>
<div class="line">                                                        <span class="keywordtype">size_t</span> xTriggerLevelBytes,</div>
<div class="line">                                                        uint8_t *pucStreamBufferStorageArea,</div>
<div class="line">                                                        <a class="code hl_typedef" href="_free_r_t_o_s_8h.html#a3675ce07f6d3e0e7130bc6ea01162d34">StaticStreamBuffer_t</a> *pxStaticStreamBuffer );</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a3675ce07f6d3e0e7130bc6ea01162d34"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a3675ce07f6d3e0e7130bc6ea01162d34">StaticStreamBuffer_t</a></div><div class="ttdeci">struct xSTATIC_STREAM_BUFFER StaticStreamBuffer_t</div></div>
<div class="ttc" id="astream__buffer_8h_html_a25174eaf07f71c7932490c235e77c531"><div class="ttname"><a href="stream__buffer_8h.html#a25174eaf07f71c7932490c235e77c531">xStreamBatchingBufferCreateStatic</a></div><div class="ttdeci">#define xStreamBatchingBufferCreateStatic(xBufferSizeBytes, xTriggerLevelBytes, pucStreamBufferStorageArea, pxStaticStreamBuffer)</div><div class="ttdef"><b>Definition</b> <a href="stream__buffer_8h_source.html#l00454">stream_buffer.h:454</a></div></div>
<div class="ttc" id="astream__buffer_8h_html_a8b80974e2278f073412293e6580ce56f"><div class="ttname"><a href="stream__buffer_8h.html#a8b80974e2278f073412293e6580ce56f">StreamBufferHandle_t</a></div><div class="ttdeci">struct StreamBufferDef_t * StreamBufferHandle_t</div><div class="ttdef"><b>Definition</b> <a href="stream__buffer_8h_source.html#l00079">stream_buffer.h:79</a></div></div>
</div><!-- fragment --><p> Creates a new stream batching buffer using statically allocated memory. See <a class="el" href="stream__buffer_8h.html#ad5102d8ba15e29862d8664b19426eabe">xStreamBatchingBufferCreate()</a> for a version that uses dynamically allocated memory.</p>
<p>configSUPPORT_STATIC_ALLOCATION must be set to 1 in FreeRTOSConfig.h for <a class="el" href="stream__buffer_8h.html#a25174eaf07f71c7932490c235e77c531">xStreamBatchingBufferCreateStatic()</a> to be available. configUSE_STREAM_BUFFERS must be set to 1 in for FreeRTOSConfig.h for <a class="el" href="stream__buffer_8h.html#a25174eaf07f71c7932490c235e77c531">xStreamBatchingBufferCreateStatic()</a> to be available.</p>
<p>The difference between a stream buffer and a stream batching buffer is when a task performs read on a non-empty buffer:</p><ul>
<li>The task reading from a non-empty stream buffer returns immediately regardless of the amount of data in the buffer.</li>
<li>The task reading from a non-empty steam batching buffer blocks until the amount of data in the buffer exceeds the trigger level or the block time expires.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xBufferSizeBytes</td><td>The size, in bytes, of the buffer pointed to by the pucStreamBufferStorageArea parameter.</td></tr>
    <tr><td class="paramname">xTriggerLevelBytes</td><td>The number of bytes that must be in the stream batching buffer to unblock a task calling xStreamBufferReceive before the block time expires.</td></tr>
    <tr><td class="paramname">pucStreamBufferStorageArea</td><td>Must point to a uint8_t array that is at least xBufferSizeBytes big. This is the array to which streams are copied when they are written to the stream batching buffer.</td></tr>
    <tr><td class="paramname">pxStaticStreamBuffer</td><td>Must point to a variable of type <a class="el" href="_free_r_t_o_s_8h.html#a3675ce07f6d3e0e7130bc6ea01162d34">StaticStreamBuffer_t</a>, which will be used to hold the stream batching buffer's data structure.</td></tr>
    <tr><td class="paramname">pxSendCompletedCallback</td><td>Callback invoked when number of bytes at least equal to trigger level is sent to the stream batching buffer. If the parameter is NULL, it will use the default implementation provided by sbSEND_COMPLETED macro. To enable the callback, configUSE_SB_COMPLETED_CALLBACK must be set to 1 in FreeRTOSConfig.h.</td></tr>
    <tr><td class="paramname">pxReceiveCompletedCallback</td><td>Callback invoked when more than zero bytes are read from a stream batching buffer. If the parameter is NULL, it will use the default implementation provided by sbRECEIVE_COMPLETED macro. To enable the callback, configUSE_SB_COMPLETED_CALLBACK must be set to 1 in FreeRTOSConfig.h.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the stream batching buffer is created successfully then a handle to the created stream batching buffer is returned. If either pucStreamBufferStorageArea or pxStaticstreamBuffer are NULL then NULL is returned.</dd></dl>
<p>Example use: </p><div class="fragment"><div class="line"><span class="comment">// Used to dimension the array used to hold the streams.  The available space</span></div>
<div class="line"><span class="comment">// will actually be one less than this, so 999.</span></div>
<div class="line"><span class="preprocessor">#define STORAGE_SIZE_BYTES 1000</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Defines the memory that will actually hold the streams within the stream</span></div>
<div class="line"><span class="comment">// batching buffer.</span></div>
<div class="line"><span class="keyword">static</span> uint8_t ucStorageBuffer[ STORAGE_SIZE_BYTES ];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The variable used to hold the stream batching buffer structure.</span></div>
<div class="line"><a class="code hl_typedef" href="_free_r_t_o_s_8h.html#a3675ce07f6d3e0e7130bc6ea01162d34">StaticStreamBuffer_t</a> xStreamBufferStruct;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> MyFunction( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line"><a class="code hl_typedef" href="stream__buffer_8h.html#a8b80974e2278f073412293e6580ce56f">StreamBufferHandle_t</a> xStreamBatchingBuffer;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> xTriggerLevel = 1;</div>
<div class="line"> </div>
<div class="line"> xStreamBatchingBuffer = <a class="code hl_define" href="stream__buffer_8h.html#a25174eaf07f71c7932490c235e77c531">xStreamBatchingBufferCreateStatic</a>( <span class="keyword">sizeof</span>( ucStorageBuffer ),</div>
<div class="line">                                                            xTriggerLevel,</div>
<div class="line">                                                            ucStorageBuffer,</div>
<div class="line">                                                            &amp;xStreamBufferStruct );</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// As neither the pucStreamBufferStorageArea or pxStaticStreamBuffer</span></div>
<div class="line"> <span class="comment">// parameters were NULL, xStreamBatchingBuffer will not be NULL, and can be</span></div>
<div class="line"> <span class="comment">// used to reference the created stream batching buffer in other stream</span></div>
<div class="line"> <span class="comment">// buffer API calls.</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Other code that uses the stream batching buffer can go here.</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
