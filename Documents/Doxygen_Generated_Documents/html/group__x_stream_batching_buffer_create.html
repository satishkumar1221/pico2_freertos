<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cheesecake: xStreamBatchingBufferCreate</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">cheesecake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__x_stream_batching_buffer_create.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">xStreamBatchingBufferCreate </div></div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="stream__buffer_8h.html">stream_buffer.h</a></p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="stream__buffer_8h.html#a8b80974e2278f073412293e6580ce56f">StreamBufferHandle_t</a> <a class="code hl_define" href="stream__buffer_8h.html#ad5102d8ba15e29862d8664b19426eabe">xStreamBatchingBufferCreate</a>( <span class="keywordtype">size_t</span> xBufferSizeBytes, <span class="keywordtype">size_t</span> xTriggerLevelBytes );</div>
<div class="ttc" id="astream__buffer_8h_html_a8b80974e2278f073412293e6580ce56f"><div class="ttname"><a href="stream__buffer_8h.html#a8b80974e2278f073412293e6580ce56f">StreamBufferHandle_t</a></div><div class="ttdeci">struct StreamBufferDef_t * StreamBufferHandle_t</div><div class="ttdef"><b>Definition</b> <a href="stream__buffer_8h_source.html#l00079">stream_buffer.h:79</a></div></div>
<div class="ttc" id="astream__buffer_8h_html_ad5102d8ba15e29862d8664b19426eabe"><div class="ttname"><a href="stream__buffer_8h.html#ad5102d8ba15e29862d8664b19426eabe">xStreamBatchingBufferCreate</a></div><div class="ttdeci">#define xStreamBatchingBufferCreate(xBufferSizeBytes, xTriggerLevelBytes)</div><div class="ttdef"><b>Definition</b> <a href="stream__buffer_8h_source.html#l00352">stream_buffer.h:352</a></div></div>
</div><!-- fragment --><p>Creates a new stream batching buffer using dynamically allocated memory. See <a class="el" href="stream__buffer_8h.html#a25174eaf07f71c7932490c235e77c531">xStreamBatchingBufferCreateStatic()</a> for a version that uses statically allocated memory (memory that is allocated at compile time).</p>
<p>configSUPPORT_DYNAMIC_ALLOCATION must be set to 1 or left undefined in FreeRTOSConfig.h for <a class="el" href="stream__buffer_8h.html#ad5102d8ba15e29862d8664b19426eabe">xStreamBatchingBufferCreate()</a> to be available. configUSE_STREAM_BUFFERS must be set to 1 in for FreeRTOSConfig.h for <a class="el" href="stream__buffer_8h.html#ad5102d8ba15e29862d8664b19426eabe">xStreamBatchingBufferCreate()</a> to be available.</p>
<p>The difference between a stream buffer and a stream batching buffer is when a task performs read on a non-empty buffer:</p><ul>
<li>The task reading from a non-empty stream buffer returns immediately regardless of the amount of data in the buffer.</li>
<li>The task reading from a non-empty steam batching buffer blocks until the amount of data in the buffer exceeds the trigger level or the block time expires.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xBufferSizeBytes</td><td>The total number of bytes the stream batching buffer will be able to hold at any one time.</td></tr>
    <tr><td class="paramname">xTriggerLevelBytes</td><td>The number of bytes that must be in the stream batching buffer to unblock a task calling xStreamBufferReceive before the block time expires.</td></tr>
    <tr><td class="paramname">pxSendCompletedCallback</td><td>Callback invoked when number of bytes at least equal to trigger level is sent to the stream batching buffer. If the parameter is NULL, it will use the default implementation provided by sbSEND_COMPLETED macro. To enable the callback, configUSE_SB_COMPLETED_CALLBACK must be set to 1 in FreeRTOSConfig.h.</td></tr>
    <tr><td class="paramname">pxReceiveCompletedCallback</td><td>Callback invoked when more than zero bytes are read from a stream batching buffer. If the parameter is NULL, it will use the default implementation provided by sbRECEIVE_COMPLETED macro. To enable the callback, configUSE_SB_COMPLETED_CALLBACK must be set to 1 in FreeRTOSConfig.h.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If NULL is returned, then the stream batching buffer cannot be created because there is insufficient heap memory available for FreeRTOS to allocate the stream batching buffer data structures and storage area. A non-NULL value being returned indicates that the stream batching buffer has been created successfully - the returned value should be stored as the handle to the created stream batching buffer.</dd></dl>
<p>Example use: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> vAFunction( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line"><a class="code hl_typedef" href="stream__buffer_8h.html#a8b80974e2278f073412293e6580ce56f">StreamBufferHandle_t</a> xStreamBatchingBuffer;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> xStreamBufferSizeBytes = 100, xTriggerLevel = 10;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Create a stream batching buffer that can hold 100 bytes.  The memory used</span></div>
<div class="line"> <span class="comment">// to hold both the stream batching buffer structure and the data in the stream</span></div>
<div class="line"> <span class="comment">// batching buffer is allocated dynamically.</span></div>
<div class="line"> xStreamBatchingBuffer = <a class="code hl_define" href="stream__buffer_8h.html#ad5102d8ba15e29862d8664b19426eabe">xStreamBatchingBufferCreate</a>( xStreamBufferSizeBytes, xTriggerLevel );</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span>( xStreamBatchingBuffer == <a class="code hl_define" href="_third_party_2_g_c_c_2_a_r_c___e_m___h_s_2portmacro_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"> {</div>
<div class="line">     <span class="comment">// There was not enough heap memory space available to create the</span></div>
<div class="line">     <span class="comment">// stream batching buffer.</span></div>
<div class="line"> }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line"> {</div>
<div class="line">     <span class="comment">// The stream batching buffer was created successfully and can now be used.</span></div>
<div class="line"> }</div>
<div class="line">}</div>
<div class="ttc" id="a_third_party_2_g_c_c_2_a_r_c___e_m___h_s_2portmacro_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="_third_party_2_g_c_c_2_a_r_c___e_m___h_s_2portmacro_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="_third_party_2_g_c_c_2_a_r_c___e_m___h_s_2portmacro_8h_source.html#l00070">portmacro.h:70</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
